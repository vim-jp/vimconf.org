---
import VimLogo from "./VimLogo.astro";
import { Menu, X } from "@lucide/astro";
---

<header
  class="fixed top-0 right-0 left-0 z-50 border-b border-gray-100 bg-white/30 backdrop-blur-md transition-all duration-300"
>
  <div class="container mx-auto px-4">
    <div class="flex h-16 items-center justify-between">
      <div class="flex items-center">
        <a href="/2025/ja" class="flex items-center">
          <VimLogo class="h-10 w-10" />
          <span class="text-xl font-bold text-emerald-700"
            >VimConf 2025 Small</span
          >
        </a>
      </div>
      <nav class="hidden items-center space-x-6 md:flex">
        <a
          href="#keynote"
          class="text-sm font-medium transition-colors hover:text-emerald-600"
        >
          基調講演
        </a>
        <a
          href="#venue"
          class="text-sm font-medium transition-colors hover:text-emerald-600"
        >
          会場
        </a>
        <a
          href="#about"
          class="text-sm font-medium transition-colors hover:text-emerald-600"
        >
          概要
        </a>
        <a
          href="#schedule"
          class="text-sm font-medium transition-colors hover:text-emerald-600"
        >
          スケジュール
        </a>
        <a
          href="#sponsors"
          class="text-sm font-medium transition-colors hover:text-emerald-600"
        >
          スポンサー
        </a>
        <a
          href="#staff"
          class="text-sm font-medium transition-colors hover:text-emerald-600"
        >
          スタッフ
        </a>
        <button
          disabled
          class="inline-flex h-auto items-center justify-center gap-2 rounded-md px-2 py-1 text-sm font-medium whitespace-nowrap ring-offset-background transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0"
          ><span class="opacity-60">EN</span><span class="mx-1">/</span><span
            class="font-bold">JA</span
          ></button
        >
      </nav>
      <div class="flex items-center md:hidden">
        <button
          class="inline-flex h-auto items-center justify-center gap-2 rounded-md px-2 py-1 text-sm font-medium whitespace-nowrap ring-offset-background transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0"
          ><span class="opacity-60">EN</span><span class="mx-1">/</span><span
            class="font-bold">JA</span
          ></button
        ><button
          class="inline-flex h-10 w-10 items-center justify-center gap-2 rounded-md text-sm font-medium whitespace-nowrap ring-offset-background transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0"
          aria-label="Toggle menu"
        >
          <span class="sr-only">Toggle menu</span>
          <span id="menu-close" class="hidden">
            <X class="h-6 w-6" />
          </span>
          <span id="menu-open">
            <Menu class="h-6 w-6" />
          </span>
        </button>
      </div>
    </div>
  </div>
  <div
    class="hidden border-t border-gray-100 bg-white md:hidden"
    id="mobile-menu"
  >
    <div class="container mx-auto px-4 py-4">
      <nav class="flex flex-col space-y-4">
        <a
          href="#keynote"
          class="py-2 text-sm font-medium transition-colors hover:text-emerald-600"
          >基調講演</a
        ><a
          href="#venue"
          class="py-2 text-sm font-medium transition-colors hover:text-emerald-600"
          >会場</a
        ><a
          href="#about"
          class="py-2 text-sm font-medium transition-colors hover:text-emerald-600"
          >概要</a
        ><a
          href="#schedule"
          class="py-2 text-sm font-medium transition-colors hover:text-emerald-600"
          >スケジュール</a
        ><a
          href="#sponsors"
          class="py-2 text-sm font-medium transition-colors hover:text-emerald-600"
          >スポンサー</a
        ><a
          href="#staff"
          class="py-2 text-sm font-medium transition-colors hover:text-emerald-600"
          >スタッフ</a
        >
      </nav>
    </div>
  </div>
</header>

<script>
  const menuButton = document.querySelector('button[aria-label="Toggle menu"]');
  const mobileMenu = document.getElementById("mobile-menu");
  const menuOpen = document.getElementById("menu-open");
  const menuClose = document.getElementById("menu-close");
  menuButton?.addEventListener("click", () => {
    toggleMenu();
  });
  function toggleMenu() {
    menuButton?.classList.toggle("open");
    mobileMenu?.classList.toggle("hidden");
    menuOpen?.classList.toggle("hidden");
    menuClose?.classList.toggle("hidden");
  }

  const menuLinks = mobileMenu?.querySelectorAll("a");
  menuLinks?.forEach((link) => {
    link.addEventListener("click", () => {
      toggleMenu();
    });
  });
</script>
