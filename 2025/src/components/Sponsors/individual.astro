---
import Card from "../Card.astro";
import type { ImageMetadata } from "astro";

const images = import.meta.glob<{ default: ImageMetadata }>(
  "/src/assets/individual-sponsors/*.png",
);

type Props = {
  name: string;
  src: string;
  comment: string;
};

const { name, src, comment } = Astro.props;

const imagePath = `/src/assets/individual-sponsors/${src}.png`;
let imageUrl = "";

if (images[imagePath]) {
  const imageModule = await images[imagePath]();
  imageUrl = imageModule.default.src;
} else {
  console.error(`Image not found: ${imagePath}`);
}
---

<Card class="border-pink-100">
  <div class="flex flex-col items-start space-x-4 p-4 md:flex-row">
    <div
      class="mb-1 flex h-12 w-12 shrink-0 overflow-hidden rounded-full bg-white shadow-sm md:h-16 md:w-16"
    >
      <img
        alt={name}
        src={imageUrl}
        loading="lazy"
        class="aspect-square h-full w-full object-cover"
      />
    </div>
    <div class="flex shrink-1 flex-col items-start gap-1">
      <span class="text-center text-xs font-semibold md:text-sm">{name}</span>
      {
        comment && comment !== "" && (
          <span class="text-xs font-medium text-gray-500 md:text-sm">
            {comment}
          </span>
        )
      }
    </div>
  </div>
</Card>
